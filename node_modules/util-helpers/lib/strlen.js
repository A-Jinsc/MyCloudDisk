'use strict';

var ut2 = require('ut2');

function strlen(str) {
    var realStr = ut2.toString(str);
    var len = 0;
    for (var i = 0; i < realStr.length; i++) {
        var c = realStr.charCodeAt(i);
        if ((c >= 0x0001 && c <= 0x007e) || (0xff60 <= c && c <= 0xff9f)) {
            len++;
        }
        else {
            len += 2;
        }
    }
    return len;
}

module.exports = strlen;
