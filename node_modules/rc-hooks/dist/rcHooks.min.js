!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).rcHooks={},t.React)}(this,(function(t,e){"use strict";var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)};var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}"function"==typeof SuppressedError&&SuppressedError;var u=void 0,c="undefined",a=Object.prototype.toString,s=Math.random;function f(t){return Array.isArray(t)}function l(t){return null!==t&&"object"==typeof t}function h(t){return a.call(t)}var p=/^0b[01]+$/i,d=/^0o[0-7]+$/i,v=/^[-+]0x[0-9a-f]+$/i;function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||"[object Symbol]"===h(t)}(t))return NaN;if(function(t){return"function"==typeof t||l(t)}(t)&&(t=Number(t)),"string"!=typeof t)return 0===t?t:+t;t=t.trim();var e=p.test(t);return e||d.test(t)?parseInt(t.slice(2),e?2:8):v.test(t)?NaN:+t}var m=typeof window!==c&&l(window)&&typeof document!==c&&l(document)&&window.document===document;h(function(){return arguments}());function g(t,e,n,r){if(void 0===r&&(r=!1),"function"!=typeof t)throw new TypeError("Expected a function");var o,i,c,a,s,f,l,h;function p(e){return c=e,f=t.apply(s,a),s=a=u,f}function d(){for(var t=[],l=0;l<arguments.length;l++)t[l]=arguments[l];s=this,a=t;var h=Date.now(),d=function(t){if(i===u)return!0;var n=t-i;return n>=e||n<0||r&&t-c>=e}(h),v=r?d||i===u||o!==u?e:e-(h-i):e;return i=h,d&&n&&o===u?p(h):(o===u||r||(clearTimeout(o),o=u),o===u&&(o=setTimeout((function(){o=u,p(Date.now())}),v)),f)}return l=y(e),h=0,e=null==l||l!=l?h:l,d.cancel=function(){o!==u&&(clearTimeout(o),o=u),i=o=a=s=u},d.flush=function(){return o!==u&&(clearTimeout(o),o=u,a)?p(Date.now()):f},d.pending=function(){return o!==u},d}function b(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=!1),g(t,e,n)}function w(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=!0),g(t,e,n,!0)}function T(t){return l(t)&&"[object Window]"===h(t)}function k(t){return arguments.length?f(t)?t:[t]:[]}function _(){}var E=0,S="_"+s().toString(36).substring(2,4);function O(t){var n=e.useRef(t);return n.current=t,n}function C(t){var n=O(t),r=e.useCallback((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=n.current;return null==r?void 0:r.apply(void 0,t)}),[]);return r}var L=function(t,n){var r=e.useRef(!1);e.useEffect((function(){if(r.current)return t();r.current=!0}),n)},R=function(){function t(){this.handlers={}}return t.prototype.eventNames=function(){var t,e=(null===(t=Object.getOwnPropertySymbols)||void 0===t?void 0:t.call(Object,this.handlers))||[];return Object.keys(this.handlers).concat(e)},t.prototype.rawListeners=function(t){var e=this.handlers[t];return e?e.map((function(t){return t.raw})):[]},t.prototype.listeners=function(t){var e=this.handlers[t];return e?e.map((function(t){return t.wrap})):[]},t.prototype.hasListener=function(t,e){return this.rawListeners(t).some((function(t){return t===e}))},t.prototype._on=function(t,e,n,r,o){void 0===r&&(r=null),void 0===o&&(o=1);var i={raw:e,wrap:n,context:r};if(this.handlers[t]){var u=1===o?"push":"unshift";this.handlers[t][u](i)}else this.handlers[t]=[i];return this},t.prototype.prependListener=function(t,e,n){return this._on(t,e,e,n,0)},t.prototype.on=function(t,e,n){return this._on(t,e,e,n)},t.prototype._wrapOnce=function(t,e,n){var r=this;void 0===n&&(n=null);var o=function(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];e.apply(n,i),r.off(t,o)};return o},t.prototype.once=function(t,e,n){var r=this._wrapOnce(t,e,n);return this._on(t,e,r,n)},t.prototype.prependOnceListener=function(t,e,n){var r=this._wrapOnce(t,e,n);return this._on(t,e,r,n,0)},t.prototype.off=function(t,e){var n=this.handlers[t];if(n)if(e){var r=n.findIndex((function(t){return t.wrap===e||t.raw===e}));-1!==r&&n.splice(r,1)}else delete this.handlers[t];return this},t.prototype.offAll=function(){return this.handlers={},this},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.handlers[t];return!!(r&&r.length>0)&&(r.forEach((function(t){t.wrap.apply(t.context,e)})),!0)},t}(),I={},P=function(){function t(t){void 0===t&&(t="default"),this.scope=t,I[this.scope]||(I[this.scope]={}),this.data=I[this.scope]}return t.prototype.getItem=function(t){return t in this.data?this.data[t]:null},t.prototype.setItem=function(t,e){this.data[t]=e},t.prototype.removeItem=function(t){delete this.data[t]},t.prototype.clear=function(){I[this.scope]={},this.data=I[this.scope]},t}();function j(t){try{var e="object"==typeof t&&null!==t&&!!t.setItem&&!!t.getItem&&!!t.removeItem;if(e){var n=Math.random().toString(16).substring(2,8)+(new Date).getTime();if(t.setItem(n,"1"),"1"!==t.getItem(n))return!1;t.removeItem(n)}return e}catch(e){return console.error("[cache2] ".concat(t," is not supported. The default memory cache will be used.")),!1}}var x=function(){function t(t,e){void 0===e&&(e={});var n=!!t&&j(t);this.options=r({needParsed:n,prefix:""},e),this.storage=n?t:new P(this.options.memoryScope)}return t.prototype.getKey=function(t){return this.options.prefix+t},t.prototype.get=function(t){var e=this.storage.getItem(this.getKey(t));return this.options.needParsed?function(t,e){try{return JSON.parse(t,e)}catch(e){return t}}(e,this.options.reviver):e},t.prototype.set=function(t,e){this.storage.setItem(this.getKey(t),this.options.needParsed?function(t,e){return JSON.stringify(t,e)}(e,this.options.replacer):e)},t.prototype.del=function(t){this.storage.removeItem(this.getKey(t))},t.prototype.clear=function(){"function"==typeof this.storage.clear&&this.storage.clear()},t}(),V="default",N=function(t){function e(e,n){var o,i=t.call(this)||this,u=V;return"string"==typeof e?u=e||V:"object"==typeof e&&(o=e),o||"object"!=typeof n||(o=n),i.options=r({max:-1,stdTTL:0,maxStrategy:"limited",checkperiod:0,prefix:"cache2_"},o),i.storage=new x(i.options.storage,r({memoryScope:u},i.options)),i.cacheKey=u,i.startCheckperiod(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype._check=function(t,e){var n=!0;return 0!==e.t&&e.t<Date.now()&&(n=!1,this.del(t),this.emit("expired",t,e.v)),n},e.prototype._wrap=function(t,e){var n=Date.now(),r="number"==typeof e?e:this.options.stdTTL;return{v:t,t:r>0?n+r:0,n:n}},e.prototype._isLimited=function(t){return this.options.max>-1&&t>=this.options.max},e.prototype._getReplaceKey=function(t,e){var n=t[0];return t.forEach((function(t){(e[t].t<e[n].t||e[t].t===e[n].t&&e[t].n<e[n].n)&&(n=t)})),n},Object.defineProperty(e.prototype,"cacheValues",{get:function(){return this.storage.get(this.cacheKey)||{}},enumerable:!1,configurable:!0}),e.prototype.setCacheValues=function(t){this.storage.set(this.cacheKey,t)},e.prototype.get=function(t){var e=this.cacheValues[t];if(e&&this._check(t,e))return e.v},e.prototype.mget=function(t){var e=this,n={};if(!Array.isArray(t))return n;var r=this.cacheValues;return t.forEach((function(t){var o=r[t];o&&e._check(t,o)&&(n[t]=o.v)})),n},e.prototype.getAll=function(){var t=Object.keys(this.cacheValues);return this.mget(t)},e.prototype.set=function(t,e,n){if(0===this.options.max)return!1;var r=this.cacheValues,o=Object.keys(r);if(!r[t]&&this._isLimited(o.length)){var i=this.keys();if(this._isLimited(i.length)){if("replaced"!==this.options.maxStrategy)return!1;var u=this._getReplaceKey(i,r);this.del(u)}}return r[t]=this._wrap(e,n),this.setCacheValues(r),this.emit("set",t,r[t].v),!0},e.prototype.mset=function(t){var e=this,n=!0;return t.forEach((function(t){var r=e.set(t.key,t.value,t.ttl);n&&!r&&(n=!1)})),n},e.prototype.del=function(t){var e=this,n=this.cacheValues,r=0;return(Array.isArray(t)?t:[t]).forEach((function(t){if(n[t]){r++;var o=n[t];delete n[t],e.emit("del",t,o.v)}})),r>0&&this.setCacheValues(n),r},e.prototype.clear=function(){this.storage.del(this.cacheKey)},e.prototype.keys=function(){var t=this,e=this.cacheValues;return Object.keys(e).filter((function(n){return t._check(n,e[n])}))},e.prototype.has=function(t){var e=this.cacheValues[t];return!(!e||!this._check(t,e))},e.prototype.take=function(t){var e,n=this.cacheValues[t];return n&&this._check(t,n)&&(e=n.v,this.del(t)),e},e.prototype.ttl=function(t,e){var n=this.cacheValues,r=n[t];return!(!r||!this._check(t,r))&&(n[t]=this._wrap(r.v,e),!0)},e.prototype.getTtl=function(t){var e=this.cacheValues,n=e[t];if(n&&this._check(t,n))return e[t].t},e.prototype.getLastModified=function(t){var e=this.cacheValues,n=e[t];if(n&&this._check(t,n))return e[t].n},e.prototype.startCheckperiod=function(){var t=this;this.keys(),this.options.checkperiod>0&&(clearTimeout(this._checkTimeout),this._checkTimeout=setTimeout((function(){t.startCheckperiod()}),this.options.checkperiod))},e.prototype.stopCheckperiod=function(){clearTimeout(this._checkTimeout)},e}(R),M=function(){function t(t){var e;this.promiseCache={},this.cache=new N((void 0===(e="uh_async_memo")&&(e=S),""+e+ ++E),t)}return t.prototype.run=function(t,e,n){var o,i=this;if(!e||"string"!=typeof(o=e)&&"[object String]"!==h(o))return t();var u=r({persisted:!0},n);if(u.persisted){var c=this.cache.get(e);if(c)return Promise.resolve(c)}return this.promiseCache[e]||(this.promiseCache[e]=t().then((function(t){return delete i.promiseCache[e],i.cache.set(e,t,u.ttl),t})).catch((function(t){return delete i.promiseCache[e],Promise.reject(t)}))),this.promiseCache[e]},t}();function D(){return"undefined"==typeof document||void 0===document.visibilityState||"hidden"!==document.visibilityState}var F=[];var W=!1;if("undefined"!=typeof window&&window.addEventListener&&!W){window.addEventListener("visibilitychange",(function(){if(D())for(var t=0;t<F.length;t++){(0,F[t])()}}),!1),W=!0}var z=[];var A=!1;if("undefined"!=typeof window&&window.addEventListener&&!A){var K=function(){if(D()&&("undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine))for(var t=0;t<z.length;t++){(0,z[t])()}};window.addEventListener("visibilitychange",K,!1),window.addEventListener("focus",K,!1),A=!0}var H=new M({prefix:"rc-hooks",stdTTL:3e5});function U(t){return H.cache.get(t)}var B=function(){function t(t,e){this.params=[],this.pollingWhenVisibleFlag=!1,this.pollingTimer=null,this.counter=1,this.destroyed=!1,this.async=t,this.options=r({cacheTime:3e5,persisted:!1,pollingWhenHidden:!0,refreshOnWindowFocus:!1,focusTimespan:5e3},e),this.unsubscribes=[],this.init()}return t.prototype.init=function(){var t,e,n,r,o=this.options,i=o.pollingInterval,u=o.refreshOnWindowFocus,c=o.focusTimespan;if(this.updateDebounce(),i&&this.unsubscribes.push((t=this.rePolling.bind(this),F.push(t),function(){var e=F.indexOf(t);F.splice(e,1)})),u){var a=(e=this.refresh.bind(this),n=c,r=!1,function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];r||(r=!0,e.apply(void 0,t),setTimeout((function(){r=!1}),n))});this.unsubscribes.push(function(t){return z.push(t),function(){var e=z.indexOf(t);z.splice(e,1)}}(a))}},t.prototype.updateDebounce=function(){var t=this.options,e=t.debounceInterval,n=t.throttleInterval;this.debounce="number"==typeof e&&e>0?b(this._run,e):void 0,this.throttle="number"==typeof n&&n>0?w(this._run,n):void 0},t.prototype.rePolling=function(){this.pollingWhenVisibleFlag&&(this.pollingWhenVisibleFlag=!1,this.refresh())},t.prototype.afterUpdateOptions=function(t,e){void 0===e&&(e={}),("debounceInterval"in e&&e.debounceInterval!==t.debounceInterval||"throttleInterval"in e&&e.throttleInterval!==t.throttleInterval)&&this.updateDebounce()},t.prototype.updateOptions=function(t){var e=this.options,n=r(r({},this.options),t);this.options=n,this.afterUpdateOptions(e,n)},t.prototype._run=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.pollingTimer&&clearTimeout(this.pollingTimer);var r=this.counter;this.params=e;var o=this.options,i=o.cacheKey,u=o.cacheTime,c=o.persisted,a=o.formatResult,s=o.onSuccess,f=o.onError,l=o.onFinally,h=o.onBefore,p=o.pollingWhenHidden,d=o.pollingInterval;return null==h||h(e),new Promise((function(n,o){H.run((function(){return t.async.apply(t,e).then((function(t){return"function"==typeof a?a(t,e):t}))}),i,{persisted:c,ttl:u}).then((function(o){r===t.counter&&(null==s||s(o,e),n(o))})).catch((function(n){r===t.counter&&(null==f||f(n,e),o(n))})).finally((function(){if(r===t.counter&&(null==l||l(),d)){if(!D()&&!p)return void(t.pollingWhenVisibleFlag=!0);t.pollingTimer=setTimeout((function(){t.run.apply(t,e)}),d)}}))}))},t.prototype.run=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.debounce?(this.debounce.apply(this,t),Promise.resolve(null)):this.throttle?(this.throttle.apply(this,t),Promise.resolve(null)):(this.counter+=1,this._run.apply(this,t))},t.prototype.refresh=function(){return this.run.apply(this,this.params)},t.prototype.cancel=function(){this.debounce&&this.debounce.cancel(),this.throttle&&this.throttle.cancel(),this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null),this.counter+=1},t.prototype.destroy=function(t){void 0===t&&(t=!0),t&&this.cancel(),this.destroyed||(this.destroyed=!0,this.unsubscribes.forEach((function(t){return t()})),this.unsubscribes=[])},t.prototype.resume=function(){this.destroyed&&(this.destroyed=!1,this.init())},t}(),$=function(t,n){var o=n||{},u=o.autoRun,c=void 0===u||u,a=o.refreshDeps,s=void 0===a?[]:a,l=o.defaultParams,h=o.loadingDelay,p=o.__INTERNAL_FORMAT__,d=o.defaultLoading,v=void 0!==d&&d,y=o.initialData,m=o.cacheKey,g=void 0===m?"":m,b=o.cacheTime,w=void 0===b?3e5:b,T=o.persisted,k=void 0!==T&&T,E=o.onSuccess,S=void 0===E?_:E,R=o.onError,I=void 0===R?_:R,P=o.onFinally,j=void 0===P?_:P,x=o.onBefore,V=void 0===x?_:x,N=o.pollingInterval,M=void 0===N?0:N,D=o.pollingWhenHidden,F=void 0===D||D,W=o.refreshOnWindowFocus,z=void 0!==W&&W,A=o.focusTimespan,K=void 0===A?5e3:A,H=o.debounceInterval,$=o.throttleInterval,J=i(e.useState({params:[],loading:v,error:null,data:g?U(g):y}),2),q=J[0],Y=J[1],G=e.useRef(null),Q=C(t),X=C(S),Z=C(I),tt=C(j),et=C(V),nt=O(p),rt=e.useCallback((function(t){et(t),G.current&&clearTimeout(G.current),(g?U(g):void 0)&&k||(Y((function(e){return r(r({},e),{loading:!h,params:t})})),h&&(G.current=setTimeout((function(){Y((function(t){return r(r({},t),{loading:!0})}))}),h)))}),[g,h,et,k]),ot=e.useCallback((function(t,e){G.current&&clearTimeout(G.current),Y((function(e){return r(r({},e),{data:t,error:null,loading:!1})})),X(t,e)}),[X]),it=e.useCallback((function(t,e){G.current&&clearTimeout(G.current),Y((function(e){return r(r({},e),{error:t,loading:!1})})),Z(t,e)}),[Z]),ut=e.useRef();ut.current||(ut.current=new B(Q,{cacheKey:g,cacheTime:w,persisted:k,formatResult:nt.current,onSuccess:ot,onError:it,onFinally:tt,onBefore:rt,debounceInterval:H,throttleInterval:$,pollingInterval:M,pollingWhenHidden:F,refreshOnWindowFocus:z,focusTimespan:K})),L((function(){ut.current.updateOptions({cacheKey:g,cacheTime:w,persisted:k,formatResult:nt.current,onSuccess:ot,onError:it,onFinally:tt,onBefore:rt,debounceInterval:H,throttleInterval:$,pollingInterval:M,pollingWhenHidden:F,refreshOnWindowFocus:z,focusTimespan:K})}),[X,Z,g,w,k,H,$,tt,et,M,F,z,K,ot,it,rt]);var ct=e.useCallback((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ut.current.run.apply(ut.current,t)}),[]),at=e.useCallback((function(){return ut.current.refresh()}),[]),st=e.useCallback((function(){ut.current.cancel(),G.current&&clearTimeout(G.current),Y((function(t){return r(r({},t),{loading:!1})}))}),[]);return L((function(){c&&f(s)&&s.length>0&&at()}),[c].concat(s)),e.useEffect((function(){if(c){var t=f(l)?l:void 0!==l?[l]:[];ct.apply(void 0,t)}return ut.current.resume(),function(){st(),ut.current.destroy(!1)}}),[]),r(r({},q),{run:ct,cancel:st,mutate:function(t){Y("function"==typeof t?function(e){return r(r({},e),{data:t(q.data)})}:function(e){return r(r({},e),{data:t})})},refresh:at})};function J(t){return"function"==typeof t?t():t}var q=function(t){var n=void 0===t?{}:t,r=n.target,o=n.threshold,i=void 0===o?100:o,u=n.onScrollLower,c=C(void 0===u?function(){}:u),a=e.useCallback((function(){if(r){var t,e=J(r);if(e)void 0===(t=e)&&(t=window),(m&&t?T(t)?document.documentElement.scrollHeight:t.scrollHeight:0)-function(t){return void 0===t&&(t=window),m&&t?T(t)?window.scrollY:t.scrollTop:0}(e)<=function(t){return void 0===t&&(t=window),m&&t?T(t)?document.documentElement.clientHeight:t.clientHeight:0}(e)+i&&c()}}),[c,r,i]);e.useEffect((function(){if(r){var t=J(r);if(t)return t.addEventListener("scroll",a),function(){t.removeEventListener("scroll",a)}}}),[r,a])};var Y=function(t){var n=O(t);e.useEffect((function(){return function(){return n.current()}}),[])};function G(t,n,r){void 0===n&&(n=0),void 0===r&&(r=!1);var o=O(t),i=e.useRef(b((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.current.apply(void 0,t)}),n,r));return Y((function(){i.current.cancel()})),{run:i.current,cancel:i.current.cancel,flush:i.current.flush}}function Q(t,n,r){void 0===n&&(n=0),void 0===r&&(r=!0);var o=O(t),i=e.useRef(w((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.current.apply(void 0,t)}),n,r));return Y((function(){i.current.cancel()})),{run:i.current,cancel:i.current.cancel,flush:i.current.flush}}var X=function(){var t=e.useRef(!1);return e.useEffect((function(){return t.current=!0,function(){t.current=!1}}),[]),t};var Z=function(){var t=e.useRef(!1);return e.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),t};function tt(t){var n=Z(),r=i(e.useState(t),2),o=r[0],u=r[1];return[o,e.useCallback((function(t){n.current||u(t)}),[])]}function et(t){return"function"==typeof t?t():"object"==typeof t&&t&&"current"in t?t.current:t}var nt=["top","right","bottom","left","width","height","size","weight"],rt={characterData:!0,childList:!0,attributes:!0,subtree:!0},ot=function(t){var e=this;this.refresh=function(){e.targetNode&&e.callback([{target:e.targetNode}],{})},this.onTransitionEnd_=function(t){var n=t.propertyName,r=void 0===n?"":n;nt.some((function(t){return r.indexOf(t)>-1}))&&e.throttleRefresh()},this.observe=function(t,n){m&&(e.targetNode=t,document.addEventListener("transitionend",e.onTransitionEnd_),window.addEventListener("resize",e.throttleRefresh),e.observer.observe(document,r(r({},rt),n)))},this.disconnect=function(){m&&(e.throttleRefresh.cancel(),e.targetNode=null,document.removeEventListener("transitionend",e.onTransitionEnd_),window.removeEventListener("resize",e.throttleRefresh),e.observer.disconnect())},this.throttleRefresh=w(this.refresh,50),this.targetNode=null,this.callback=t,this.observer=new MutationObserver(this.throttleRefresh)};t.clearCache=function(t){t?H.cache.del(t):H.cache.clear()},t.useAsync=$,t.useClickAway=function(t,n,r){void 0===r&&(r="click");var o=k(t),i=O(o),u=o.every((function(t){return"function"==typeof t})),c=u?i:o,a=O(n),s=k(r),f=O(s),l=s.join("");e.useEffect((function(){var t=function(t){var e;(u?c.current:c).some((function(e){var n=et(e);return!n||(null==n?void 0:n.contains(t.target))}))||null===(e=a.current)||void 0===e||e.call(a,t)},e=k(f.current);return e.forEach((function(e){document.addEventListener(e,t)})),function(){e.forEach((function(e){document.removeEventListener(e,t)}))}}),[c,u,l])},t.useControllableValue=function(t,n){void 0===t&&(t={}),void 0===n&&(n={});var r=n.defaultValue,o=n.defaultValuePropName,u=void 0===o?"defaultValue":o,c=n.valuePropName,a=void 0===c?"value":c,s=n.trigger,f=void 0===s?"onChange":s,l=a in t,h=t[a],p=i(e.useState((function(){return l?h:u in t?t[u]:r})),2),d=p[0],v=p[1];L((function(){l&&v(h)}),[h,l]);var y=e.useCallback((function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];l||v(e),t[f]&&t[f].apply(t,[e].concat(n))}),[l,t,f]);return[l?h:d,y]},t.useDebounce=function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=!1);var o=i(e.useState(t),2),u=o[0],c=G(o[1],n,r).run;return e.useEffect((function(){c(t)}),[c,t]),u},t.useDebounceFn=G,t.useLatest=O,t.useLimitList=function(t,n){void 0===t&&(t=[]),void 0===n&&(n={});var r=n||{},o=r.count,u=void 0===o?3:o,c=r.defaultLimited,a=void 0===c||c,s=e.useRef(a),l=e.useMemo((function(){return f(t)?t:[]}),[t]),h=e.useMemo((function(){return u>0?Math.ceil(u):0}),[u]),p=e.useMemo((function(){return l.length>h}),[h,l.length]),d=i(e.useState((function(){return p&&a?l.slice(0,h):l})),2),v=d[0],y=d[1];return e.useEffect((function(){y(s.current?l.slice(0,h):l)}),[h,l]),{canLimit:p,limited:s.current,data:v,toggle:function(){p&&(s.current=!s.current),y(s.current?l.slice(0,h):l)}}},t.useLoadMore=function(t,n){var u=n||{},c=u.threshold,a=void 0===c?100:c,s=u.target,l=u.isNoMore,h=void 0===l?function(){return!1}:l,p=u.refreshDeps,d=void 0===p?[]:p,v=u.autoRun,y=void 0===v||v,m=o(u,["threshold","target","isNoMore","refreshDeps","autoRun"]),g=e.useRef([]),b=e.useRef(1),w=$(t,r(r({defaultParams:[{current:b.current}],autoRun:y},m),{onError:function(t,e){var n;b.current>1&&(b.current-=1),null===(n=null==m?void 0:m.onError)||void 0===n||n.call(m,t,e)},__INTERNAL_FORMAT__:function(t){return g.current=1===b.current?t.list:g.current.concat(t.list),r(r({},t),{list:g.current})}})),T=w.run,k=w.data,_=w.loading,E=w.cancel,S=w.params,O=w.mutate,C=o(w,["run","data","loading","cancel","params","mutate"]),R=!!h&&(!_&&h(k)),I=i(S||[]),P=I[0],j=I.slice(1),x=e.useCallback((function(){return T.apply(void 0,[{current:b.current}].concat(j))}),[j,T]),V=e.useCallback((function(){_&&b.current>1&&(b.current-=1),E()}),[E,_]),N=e.useCallback((function(){_||R||(b.current+=1,x())}),[_,R,x]),M=e.useCallback((function(t){var e="function"==typeof t?t(k):t;g.current=(null==e?void 0:e.list)||[],O(e)}),[k,O]),D=e.useCallback((function(){return V(),b.current=1,M((function(t){return r(r({},t),{list:[]})})),x()}),[V,x,M]),F=e.useCallback((function(){if(!_&&s)return N()}),[N,s,_]);return q({target:s,threshold:a,onScrollLower:F}),L((function(){y&&f(d)&&d.length>0&&D()}),d),r(r({},C),{loading:_,data:k,run:T,refresh:D,cancel:V,mutate:M,params:[r(r({},P),{current:b.current})].concat(j),loadMore:N,loadingMore:_&&b.current>1,noMore:R})},t.useMount=function(t){e.useEffect((function(){t()}),[])},t.useMountedRef=X,t.usePagination=function(t,n){var u=n||{},c=u.defaultPageSize,a=void 0===c?10:c,s=u.refreshDeps,l=void 0===s?[]:s,h=u.defaultParams,p=u.autoRun,d=void 0===p||p,v=o(u,["defaultPageSize","refreshDeps","defaultParams","autoRun"]),y=e.useMemo((function(){return h||[{current:1,pageSize:a}]}),[a,h]),m=$(t,r({defaultParams:y,autoRun:d},v)),g=m.run,b=m.data,w=m.params,T=m.loading,k=o(m,["run","data","params","loading"]),_=w&&w[0]?w[0]:y[0],E=_.current,S=_.pageSize,O=(null==b?void 0:b.total)||0,C=e.useCallback((function(t){var e=i(w),n=e[0],o=e.slice(1);g.apply(void 0,[r(r({},n),t)].concat(o))}),[w,g]),R=e.useCallback((function(){C({current:E,pageSize:S})}),[C,E,S]),I=e.useCallback((function(t,e){var n=t<=0?1:t,r=e<=0?1:e,o=Math.ceil(O/r);n>o&&o>0&&(n=o),C({current:n,pageSize:r})}),[C,O]),P=e.useCallback((function(t){I(t,S)}),[I,S]),j=e.useCallback((function(t){I(E,t)}),[E,I]),x=e.useCallback((function(t,e,n,r){C({current:null==t?void 0:t.current,pageSize:null==t?void 0:t.pageSize,filters:e,sorter:n,extra:r})}),[C]);return L((function(){d&&f(l)&&l.length>0&&P(1)}),l),r(r({},k),{data:b,run:g,refresh:R,loading:T,params:w,pagination:{current:E,pageSize:S,total:O,onChange:I,changeCurrent:P,changePageSize:j},tableProps:{dataSource:(null==b?void 0:b.list)||[],loading:T,onChange:x,pagination:{total:O,current:E,pageSize:S}}})},t.usePersistFn=C,t.usePrevious=function(t){var n=X(),r=e.useRef(),o=e.useRef(t);return n.current&&o.current!==t&&(r.current=o.current,o.current=t),r.current},t.useSafeState=tt,t.useSetState=function(t){var n=i(e.useState(t),2),o=n[0],u=n[1];return[o,e.useCallback((function(t){u((function(e){var n=t instanceof Function?t(e):t;return n instanceof Object?r(r({},e),n):e}))}),[])]},t.useSize=function(t){var n=O(t),r="function"==typeof t,o=r?n:t,u=i(e.useState((function(){var e=et(t);return{width:null==e?void 0:e.clientWidth,height:null==e?void 0:e.clientHeight}})),2),c=u[0],a=u[1];return e.useEffect((function(){var t=et(r?o.current:o);function e(t){t&&a({width:t.clientWidth,height:t.clientHeight})}if(!t)return function(){};e(t);var n=new ot((function(t){t.forEach((function(t){e(t.target)}))}));return n.observe(t),function(){n.disconnect()}}),[o,r]),c},t.useThrottle=function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=!0);var o=i(e.useState(t),2),u=o[0],c=Q(o[1],n,r).run;return e.useEffect((function(){c(t)}),[c,t]),u},t.useThrottleFn=Q,t.useUnmount=Y,t.useUnmountedRef=Z,t.useUpdate=function(){var t=i(tt(0),2)[1];return e.useCallback((function(){t((function(t){return t+1}))}),[])},t.useUpdateEffect=L,t.useUpdateLayoutEffect=function(t,n){var r=e.useRef(!1);e.useLayoutEffect((function(){if(r.current)return t();r.current=!0}),n)}}));
//# sourceMappingURL=rcHooks.min.js.map
