{
  "version": 3,
  "sources": ["../../react-script-loader/ReactScriptLoader.js", "../../react-captcha/index.js"],
  "sourcesContent": ["\n// A dictionary mapping script URLs to a dictionary mapping\n// component key to component for all components that are waiting\n// for the script to load.\nvar scriptObservers = {};\n\n// A dictionary mapping script URL to a boolean value indicating if the script\n// has already been loaded.\nvar loadedScripts = {};\n\n// A dictionary mapping script URL to a boolean value indicating if the script\n// has failed to load.\nvar erroredScripts = {};\n\n// A counter used to generate a unique id for each component that uses\n// ScriptLoaderMixin.\nvar idCount = 0;\n\nvar ReactScriptLoader = {\n\tcomponentDidMount: function(key, component, scriptURL) {\n\t\tif (typeof component.onScriptLoaded !== 'function') {\n\t\t\tthrow new Error('ScriptLoader: Component class must implement onScriptLoaded()');\n\t\t}\n\t\tif (typeof component.onScriptError !== 'function') {\n\t\t\tthrow new Error('ScriptLoader: Component class must implement onScriptError()');\n\t\t}\n\t\tif (loadedScripts[scriptURL]) {\n\t\t\tcomponent.onScriptLoaded();\n\t\t\treturn;\n\t\t}\n\t\tif (erroredScripts[scriptURL]) {\n\t\t\tcomponent.onScriptError();\n\t\t\treturn;\n\t\t}\n\n\t\t// If the script is loading, add the component to the script's observers\n\t\t// and return. Otherwise, initialize the script's observers with the component\n\t\t// and start loading the script.\n\t\tif (scriptObservers[scriptURL]) {\n\t\t\tscriptObservers[scriptURL][key] = component;\n\t\t\treturn;\n\t\t}\n\n\t\tvar observers = {};\n\t\tobservers[key] = component;\n\t\tscriptObservers[scriptURL] = observers;\n\n\t\tvar script = document.createElement('script');\n\t\tscript.src = scriptURL;\n\n\t\tvar callObserverFuncAndRemoveObserver = function(func) {\n\t\t\tvar observers = scriptObservers[scriptURL];\n\t\t\tfor (var key in observers) {\n\t\t\t\tobserver = observers[key];\n\t\t\t\tvar removeObserver = func(observer);\n\t\t\t\tif (removeObserver) {\n\t\t\t\t\tdelete scriptObservers[scriptURL][key];\n\t\t\t\t}\n\t\t\t}\n\t\t\t//delete scriptObservers[scriptURL];\n\t\t}\n\t\tscript.onload = function() {\n\t\t\tloadedScripts[scriptURL] = true;\n\t\t\tcallObserverFuncAndRemoveObserver(function(observer) {\n\t\t\t\tif (observer.deferOnScriptLoaded && observer.deferOnScriptLoaded()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tobserver.onScriptLoaded();\n\t\t\t\treturn true;\n\t\t\t});\n\t\t};\n\t\tscript.onerror = function(event) {\n\t\t\terroredScripts[scriptURL] = true;\n\t\t\tcallObserverFuncAndRemoveObserver(function(observer) {\n\t\t\t\tobserver.onScriptError();\n\t\t\t\treturn true;\n\t\t\t});\n\t\t};\n\t\tdocument.body.appendChild(script);\n\t},\n\tcomponentWillUnmount: function(key, scriptURL) {\n\t\t// If the component is waiting for the script to load, remove the\n\t\t// component from the script's observers before unmounting the component.\n\t\tvar observers = scriptObservers[scriptURL];\n\t\tif (observers) {\n\t\t\tdelete observers[key];\n\t\t}\n\t},\n\ttriggerOnScriptLoaded: function(scriptURL) {\n\t\tif (!loadedScripts[scriptURL]) {\n\t\t\tthrow new Error('Error: only call this function after the script has in fact loaded.');\n\t\t}\n\t\tvar observers = scriptObservers[scriptURL];\n\t\tfor (var key in observers) {\n\t\t\tvar observer = observers[key];\n\t\t\tobserver.onScriptLoaded();\n\t\t}\n\t\tdelete scriptObservers[scriptURL];\n\t}\n};\n\nvar ReactScriptLoaderMixin = {\n\tcomponentDidMount: function() {\n\t\tif (typeof this.getScriptURL !== 'function') {\n\t\t\tthrow new Error(\"ScriptLoaderMixin: Component class must implement getScriptURL().\")\n\t\t}\n\t\tReactScriptLoader.componentDidMount(this.__getScriptLoaderID(), this, this.getScriptURL());\n\t},\n\tcomponentWillUnmount: function() {\n\t\tReactScriptLoader.componentWillUnmount(this.__getScriptLoaderID(), this.getScriptURL());\n\t},\n\t__getScriptLoaderID: function() {\n\t\treturn 'id' + idCount++;\n\t},\n};\n\nexports.ReactScriptLoaderMixin = ReactScriptLoaderMixin;\nexports.ReactScriptLoader = ReactScriptLoader;\n", "'use strict';\n\nvar React = require('react');\nvar ReactScriptLoaderMixin = require('react-script-loader').ReactScriptLoaderMixin;\n\nvar Captcha = React.createClass({\n    displayName: 'Captcha',\n\n    mixins: [ReactScriptLoaderMixin],\n    getInitialState: function getInitialState() {\n        return {\n            scriptLoading: true,\n            scriptLoadError: false\n        };\n    },\n\n    componentDidMount: function componentDidMount() {\n        var sitekey = this.props.sitekey;\n        var theme = this.props.theme;\n        var type = this.props.type;\n        var callback = this.props.callback;\n        window.onloadCallback = function () {\n            grecaptcha.render('captcha', {\n                'sitekey': sitekey,\n                'callback': callback,\n                'theme': theme,\n                'type': type\n            });\n        };\n    },\n\n    getScriptURL: function getScriptURL() {\n        return 'https://www.google.com/recaptcha/api.js?onload=onloadCallback&hl=' + this.props.lang + '&render=explicit&rnd=' + Math.random();\n    },\n\n    onScriptLoaded: function onScriptLoaded() {\n        this.setState({ scriptLoading: false });\n    },\n\n    onScriptError: function onScriptError() {\n        this.setState({ scriptLoading: false, scriptLoadError: true });\n    },\n\n    render: function render() {\n        if (this.state.scriptLoadError) {\n            console.log('loading failed');\n        }\n        return React.createElement('div', { className: 'g-recaptcha', id: 'captcha' });\n    }\n});\n\nmodule.exports = Captcha;\n"],
  "mappings": "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",
  "names": ["observers", "key", "observer"]
}
