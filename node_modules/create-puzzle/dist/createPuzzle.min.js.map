{"version":3,"file":"createPuzzle.min.js","sources":["../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/internals/native.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/isObject.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/isObjectLike.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/internals/getTag.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/toNumber.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/isSymbol.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/toFinite.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/randomInt.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/isBlob.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/uniqueId.js","../node_modules/.pnpm/util-helpers@5.0.4/node_modules/util-helpers/esm/utils/setup.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/constant.js","../node_modules/.pnpm/util-helpers@5.0.4/node_modules/util-helpers/esm/utils/native.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/noop.js","../node_modules/.pnpm/@rollup+plugin-typescript@11.1.6_rollup@4.18.0_tslib@2.6.3_typescript@5.5.3/node_modules/tslib/tslib.es6.js","../node_modules/.pnpm/util-helpers@5.0.4/node_modules/util-helpers/esm/getFileBlob.js","../node_modules/.pnpm/util-helpers@5.0.4/node_modules/util-helpers/esm/ajax.js","../node_modules/.pnpm/util-helpers@5.0.4/node_modules/util-helpers/esm/loadImageWithBlob.js","../node_modules/.pnpm/util-helpers@5.0.4/node_modules/util-helpers/esm/loadImage.js","../node_modules/.pnpm/emitter-pro@1.2.1/node_modules/emitter-pro/dist/emitter-pro.esm.js","../node_modules/.pnpm/cache2@3.0.0/node_modules/cache2/dist/cache2.esm.js","../src/util.ts","../node_modules/.pnpm/util-helpers@5.0.4/node_modules/util-helpers/esm/AsyncMemo.js","../node_modules/.pnpm/ut2@1.10.0/node_modules/ut2/es/isString.js","../src/index.ts"],"sourcesContent":["var nativeUndefined = void 0;\nvar stringUndefined = 'undefined';\nvar stringObject = 'object';\nvar objectProto = Object.prototype;\nvar objectProtoToString = objectProto.toString;\nvar objectProtoHasOwnProperty = objectProto.hasOwnProperty;\nvar objectProtoPropertyIsEnumerable = objectProto.propertyIsEnumerable;\nvar objectGetOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar objectGetPrototypeOf = Object.getPrototypeOf;\nvar objectKeys = Object.keys;\nvar functionProto = Function.prototype;\nvar functionProtoToString = functionProto.toString;\nvar symbolExisted = typeof Symbol !== stringUndefined;\nvar symbolProto = symbolExisted ? Symbol.prototype : nativeUndefined;\nvar arrayProto = Array.prototype;\nvar arrayProtoSlice = arrayProto.slice;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathRandom = Math.random;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar mathAbs = Math.abs;\nvar numberIsFinite = Number.isFinite;\nvar numberIsInteger = Number.isInteger;\nvar numberIsSafeInteger = Number.isSafeInteger;\nvar globalThisExisted = typeof globalThis === stringObject && globalThis;\nvar globalExisted = typeof global === stringObject && global;\nvar selfExisted = typeof self === stringObject && self;\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\nvar MIN_SAFE_INTEGER = Number.MIN_SAFE_INTEGER || -9007199254740991;\nvar MAX_ARRAY_LENGTH = 4294967295;\nvar bigIntTag = '[object BigInt]';\nvar numberTag = '[object Number]';\nvar booleanTag = '[object Boolean]';\nvar stringTag = '[object String]';\nvar dateTag = '[object Date]';\nvar regExpTag = '[object RegExp]';\nvar symbolTag = '[object Symbol]';\nvar errorTag = '[object Error]';\nvar arrayBufferTag = '[object ArrayBuffer]';\nvar argumentsTag = '[object Arguments]';\nvar arrayTag = '[object Array]';\nvar functionTags = ['Function', 'AsyncFunction', 'GeneratorFunction', 'Proxy'].map(function (item) { return '[object ' + item + ']'; });\nvar weakSetTag = '[object WeakSet]';\nvar blobTag = '[object Blob]';\nvar domExceptionTag = '[object DOMException]';\nvar objectTag = '[object Object]';\nvar dataViewTag = '[object DataView]';\nvar mapTag = '[object Map]';\nvar promiseTag = '[object Promise]';\nvar setTag = '[object Set]';\nvar weakMapTag = '[object WeakMap]';\nvar windowTag = '[object Window]';\n\nexport { MAX_ARRAY_LENGTH, MAX_SAFE_INTEGER, MIN_SAFE_INTEGER, argumentsTag, arrayBufferTag, arrayProto, arrayProtoSlice, arrayTag, bigIntTag, blobTag, booleanTag, dataViewTag, dateTag, domExceptionTag, errorTag, functionProto, functionProtoToString, functionTags, globalExisted, globalThisExisted, mapTag, mathAbs, mathCeil, mathFloor, mathMax, mathMin, mathRandom, nativeUndefined, numberIsFinite, numberIsInteger, numberIsSafeInteger, numberTag, objectGetOwnPropertySymbols, objectGetPrototypeOf, objectKeys, objectProto, objectProtoHasOwnProperty, objectProtoPropertyIsEnumerable, objectProtoToString, objectTag, promiseTag, regExpTag, selfExisted, setTag, stringObject, stringTag, stringUndefined, symbolProto, symbolTag, weakMapTag, weakSetTag, windowTag };\n","import isObjectLike from './isObjectLike.js';\n\nfunction isObject(value) {\n    return typeof value === 'function' || isObjectLike(value);\n}\n\nexport { isObject as default };\n","function isObjectLike(value) {\n    return value !== null && typeof value === 'object';\n}\n\nexport { isObjectLike as default };\n","import { objectProtoToString } from './native.js';\n\nfunction getTag(value) {\n    return objectProtoToString.call(value);\n}\n\nexport { getTag as default };\n","import isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\nvar reIsBinary = /^0b[01]+$/i;\nvar reIsOctal = /^0o[0-7]+$/i;\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\nfunction toNumber(value) {\n    if (typeof value === 'number') {\n        return value;\n    }\n    if (isSymbol(value)) {\n        return NaN;\n    }\n    if (isObject(value)) {\n        value = Number(value);\n    }\n    if (typeof value !== 'string') {\n        return value === 0 ? value : +value;\n    }\n    value = value.trim();\n    var isBinary = reIsBinary.test(value);\n    return isBinary || reIsOctal.test(value) ? parseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NaN : +value;\n}\n\nexport { toNumber as default };\n","import getTag from './internals/getTag.js';\nimport { symbolTag } from './internals/native.js';\n\nfunction isSymbol(value) {\n    return typeof value === 'symbol' || getTag(value) === symbolTag;\n}\n\nexport { isSymbol as default };\n","import toNumber from './toNumber.js';\n\nvar MAX_VALUE = 1.7976931348623157e308;\nfunction toFinite(value) {\n    if (!value) {\n        return value === 0 ? value : 0;\n    }\n    value = toNumber(value);\n    if (value === Infinity || value === -Infinity) {\n        var sign = value < 0 ? -1 : 1;\n        return sign * MAX_VALUE;\n    }\n    return value === value ? value : 0;\n}\n\nexport { toFinite as default };\n","import { mathFloor, mathRandom, mathCeil, mathMin, mathMax } from './internals/native.js';\nimport toFinite from './toFinite.js';\n\nfunction randomInt(lower, upper) {\n    if (lower === void 0) { lower = 0; }\n    if (upper === void 0) { upper = 1; }\n    lower = toFinite(lower);\n    upper = toFinite(upper);\n    var min = mathCeil(mathMin(lower, upper) || 0);\n    var max = mathFloor(mathMax(lower, upper) || 0);\n    if (min > max) {\n        var temp = min;\n        min = max;\n        max = temp;\n    }\n    return mathFloor(min + mathRandom() * (max - min + 1));\n}\n\nexport { randomInt as default };\n","import getTag from './internals/getTag.js';\nimport { blobTag, stringUndefined } from './internals/native.js';\n\nvar blobExisted = typeof Blob !== stringUndefined;\nfunction isBlob(value) {\n    if (blobExisted && value instanceof Blob) {\n        return true;\n    }\n    return getTag(value) === blobTag;\n}\n\nexport { isBlob as default };\n","import { mathRandom } from './internals/native.js';\n\nvar idCounter = 0;\nvar defaultPrefix = '_' + mathRandom().toString(36).substring(2, 4);\nfunction uniqueId(prefix) {\n    if (prefix === void 0) { prefix = defaultPrefix; }\n    return '' + prefix + ++idCounter;\n}\n\nexport { uniqueId as default };\n","var URLExisted = typeof URL !== 'undefined';\n\nexport { URLExisted };\n","function constant(value) {\n    return function () {\n        return value;\n    };\n}\n\nexport { constant as default };\n","import { constant, noop } from 'ut2';\nimport { URLExisted } from './setup.js';\n\nvar nativeUndefined = void 0;\nvar objectKeys = Object.keys;\nvar objectValues = Object.values;\nvar createObjectURL = URLExisted ? URL.createObjectURL : constant('');\nvar revokeObjectURL = URLExisted ? URL.revokeObjectURL : noop;\n\nexport { createObjectURL, nativeUndefined, objectKeys, objectValues, revokeObjectURL };\n","function noop() { }\n\nexport { noop as default };\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","import { __assign } from 'tslib';\nimport { isBlob } from 'ut2';\nimport ajax from './ajax.js';\n\nvar SuccessResponseStatus = [200, 304];\nfunction getFileBlob(file, ajaxOptions) {\n    return new Promise(function (resolve, reject) {\n        if (isBlob(file)) {\n            resolve(file);\n        }\n        else {\n            ajax(file, __assign({ responseType: 'blob' }, ajaxOptions))\n                .then(function (ev) {\n                var responseStatus = ev.target.status;\n                if (SuccessResponseStatus.indexOf(responseStatus) !== -1) {\n                    resolve(ev.target.response);\n                }\n                else {\n                    var err = new Error(\"The file does not support get requests, responseStatus \".concat(responseStatus, \", '\").concat(file, \"'.\"));\n                    console.error(err);\n                    reject(err);\n                }\n            })\n                .catch(function (err) {\n                console.error(new Error(\"Failed to request file. \".concat(err)));\n                reject(err);\n            });\n        }\n    });\n}\n\nexport { getFileBlob as default };\n","import { objectKeys } from './utils/native.js';\n\nfunction ajax(url, options) {\n    var _a = options || {}, _b = _a.method, method = _b === void 0 ? 'get' : _b, _c = _a.data, data = _c === void 0 ? null : _c, timeout = _a.timeout, headers = _a.headers, _d = _a.withCredentials, withCredentials = _d === void 0 ? false : _d, _e = _a.async, async = _e === void 0 ? true : _e, _f = _a.user, user = _f === void 0 ? null : _f, _g = _a.password, password = _g === void 0 ? null : _g, responseType = _a.responseType, onReadyStateChange = _a.onReadyStateChange, onLoadStart = _a.onLoadStart, onProgress = _a.onProgress, onAbort = _a.onAbort, onTimeout = _a.onTimeout, onError = _a.onError, onLoad = _a.onLoad, onLoadEnd = _a.onLoadEnd;\n    return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open(method.toLowerCase(), url, async, user, password);\n        if (onReadyStateChange) {\n            xhr.onreadystatechange = onReadyStateChange;\n        }\n        if (typeof timeout === 'number' && timeout > 0) {\n            xhr.timeout = timeout;\n        }\n        xhr.withCredentials = withCredentials;\n        if (responseType) {\n            xhr.responseType = responseType;\n        }\n        if (typeof headers === 'object') {\n            objectKeys(headers).map(function (item) {\n                xhr.setRequestHeader(item, headers[item]);\n            });\n        }\n        var wrapSuccess = function (cb) {\n            return function (e) {\n                resolve(e);\n                cb === null || cb === void 0 ? void 0 : cb.call(xhr, e);\n            };\n        };\n        var wrapError = function (cb) {\n            return function (e) {\n                reject(e);\n                cb === null || cb === void 0 ? void 0 : cb.call(xhr, e);\n            };\n        };\n        var events = {\n            loadstart: onLoadStart,\n            progress: onProgress,\n            abort: wrapError(onAbort),\n            timeout: wrapError(onTimeout),\n            error: wrapError(onError),\n            load: wrapSuccess(onLoad),\n            loadend: onLoadEnd\n        };\n        var eventKeys = objectKeys(events);\n        eventKeys.map(function (item) {\n            var func = events[item];\n            if (func) {\n                xhr.addEventListener(item, func);\n            }\n        });\n        xhr.send(data);\n    });\n}\n\nexport { ajax as default };\n","import getFileBlob from './getFileBlob.js';\nimport loadImage from './loadImage.js';\n\nfunction loadImageWithBlob(img, ajaxOptions) {\n    return getFileBlob(img, ajaxOptions).then(function (blob) {\n        return loadImage(blob).then(function (image) {\n            return { blob: blob, image: image };\n        });\n    });\n}\n\nexport { loadImageWithBlob as default };\n","import { isBlob } from 'ut2';\nimport { createObjectURL, revokeObjectURL } from './utils/native.js';\n\nfunction loadImage(img) {\n    return new Promise(function (resolve, reject) {\n        var imgIsBlob = isBlob(img);\n        var url = imgIsBlob ? createObjectURL(img) : img;\n        var image = new Image();\n        if (!imgIsBlob) {\n            image.crossOrigin = 'anonymous';\n        }\n        image.onload = function () {\n            resolve(image);\n        };\n        image.onerror = function (err) {\n            if (imgIsBlob) {\n                revokeObjectURL(url);\n            }\n            console.error(\"[loadImage] The image load failed, '\".concat(img, \"'.\"));\n            reject(err);\n        };\n        image.src = url;\n    });\n}\n\nexport { loadImage as default };\n","var EmitterPro = /** @class */ (function () {\n    function EmitterPro() {\n        this.handlers = {};\n    }\n    EmitterPro.prototype.eventNames = function () {\n        var _a;\n        var symbols = ((_a = Object.getOwnPropertySymbols) === null || _a === void 0 ? void 0 : _a.call(Object, this.handlers)) || [];\n        var keys = Object.keys(this.handlers);\n        return keys.concat(symbols);\n    };\n    EmitterPro.prototype.rawListeners = function (eventName) {\n        var handler = this.handlers[eventName];\n        return handler ? handler.map(function (item) { return item.raw; }) : [];\n    };\n    EmitterPro.prototype.listeners = function (eventName) {\n        var handler = this.handlers[eventName];\n        return handler ? handler.map(function (item) { return item.wrap; }) : [];\n    };\n    EmitterPro.prototype.hasListener = function (eventName, listener) {\n        return this.rawListeners(eventName).some(function (item) { return item === listener; });\n    };\n    EmitterPro.prototype._on = function (eventName, raw, wrap, context, dir) {\n        if (context === void 0) { context = null; }\n        if (dir === void 0) { dir = 1; }\n        var currentListener = { raw: raw, wrap: wrap, context: context };\n        if (!this.handlers[eventName]) {\n            this.handlers[eventName] = [currentListener];\n        }\n        else {\n            var appendMethod = dir === 1 ? 'push' : 'unshift';\n            this.handlers[eventName][appendMethod](currentListener);\n        }\n        return this;\n    };\n    EmitterPro.prototype.prependListener = function (eventName, listener, context) {\n        return this._on(eventName, listener, listener, context, 0);\n    };\n    EmitterPro.prototype.on = function (eventName, listener, context) {\n        return this._on(eventName, listener, listener, context);\n    };\n    EmitterPro.prototype._wrapOnce = function (eventName, listener, context) {\n        var _this = this;\n        if (context === void 0) { context = null; }\n        var wrap = (function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            listener.apply(context, args);\n            _this.off(eventName, wrap);\n        });\n        return wrap;\n    };\n    EmitterPro.prototype.once = function (eventName, listener, context) {\n        var wrap = this._wrapOnce(eventName, listener, context);\n        return this._on(eventName, listener, wrap, context);\n    };\n    EmitterPro.prototype.prependOnceListener = function (eventName, listener, context) {\n        var wrap = this._wrapOnce(eventName, listener, context);\n        return this._on(eventName, listener, wrap, context, 0);\n    };\n    EmitterPro.prototype.off = function (eventName, listener) {\n        var handler = this.handlers[eventName];\n        if (handler) {\n            if (listener) {\n                var index = handler.findIndex(function (item) { return item.wrap === listener || item.raw === listener; });\n                if (index !== -1) {\n                    handler.splice(index, 1);\n                }\n            }\n            else {\n                delete this.handlers[eventName];\n            }\n        }\n        return this;\n    };\n    EmitterPro.prototype.offAll = function () {\n        this.handlers = {};\n        return this;\n    };\n    EmitterPro.prototype.emit = function (eventName) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var handler = this.handlers[eventName];\n        if (handler && handler.length > 0) {\n            handler.forEach(function (listener) {\n                listener.wrap.apply(listener.context, args);\n            });\n            return true;\n        }\n        return false;\n    };\n    return EmitterPro;\n}());\n\nexport { EmitterPro as default };\n","import { __assign, __extends } from 'tslib';\nimport Emitter from 'emitter-pro';\n\n// 随机字符串\nfunction randomString() {\n    return Math.random().toString(16).substring(2, 8);\n}\n// 内部自增id\nvar uid = 1;\n// 返回唯一标识\nfunction getUniqueId() {\n    return \"\".concat(randomString(), \"_\").concat(uid++);\n}\n// 是否支持 storage\nfunction isStorageSupported(storage) {\n    try {\n        var isSupport = typeof storage === 'object' &&\n            storage !== null &&\n            !!storage.setItem &&\n            !!storage.getItem &&\n            !!storage.removeItem;\n        if (isSupport) {\n            var key = getUniqueId();\n            var value = '1';\n            storage.setItem(key, value);\n            if (storage.getItem(key) !== value) {\n                return false;\n            }\n            storage.removeItem(key);\n        }\n        return isSupport;\n    }\n    catch (e) {\n        console.error(\"[cache2] \".concat(storage, \" is not supported. The default memory cache will be used.\"));\n        return false;\n    }\n}\nfunction parse(value, reviver) {\n    try {\n        return JSON.parse(value, reviver);\n    }\n    catch (e) {\n        return value;\n    }\n}\nfunction stringify(value, replacer) {\n    return JSON.stringify(value, replacer);\n}\n\nvar cache = {};\nvar MemoryStorage = /** @class */ (function () {\n    function MemoryStorage(scope) {\n        if (scope === void 0) { scope = 'default'; }\n        this.scope = scope;\n        if (!cache[this.scope]) {\n            cache[this.scope] = {};\n        }\n        this.data = cache[this.scope];\n    }\n    MemoryStorage.prototype.getItem = function (key) {\n        return key in this.data ? this.data[key] : null;\n    };\n    MemoryStorage.prototype.setItem = function (key, value) {\n        this.data[key] = value;\n    };\n    MemoryStorage.prototype.removeItem = function (key) {\n        delete this.data[key];\n    };\n    MemoryStorage.prototype.clear = function () {\n        cache[this.scope] = {};\n        this.data = cache[this.scope];\n    };\n    return MemoryStorage;\n}());\n\nvar Storage = /** @class */ (function () {\n    function Storage(storage, options) {\n        if (options === void 0) { options = {}; }\n        var isSupported = storage ? isStorageSupported(storage) : false;\n        this.options = __assign({ needParsed: isSupported }, options);\n        this.storage = isSupported ? storage : new MemoryStorage(this.options.memoryScope);\n    }\n    Storage.prototype.get = function (key) {\n        var data = this.storage.getItem(key);\n        return this.options.needParsed ? parse(data, this.options.reviver) : data;\n    };\n    Storage.prototype.set = function (key, data) {\n        this.storage.setItem(key, this.options.needParsed ? stringify(data, this.options.replacer) : data);\n    };\n    Storage.prototype.del = function (key) {\n        this.storage.removeItem(key);\n    };\n    Storage.prototype.clear = function () {\n        if (typeof this.storage.clear === 'function') {\n            this.storage.clear();\n        }\n    };\n    return Storage;\n}());\n\nvar defaultPrefix = 'cache2_'; // 命名空间缓存键前缀，默认 cache2_ 。\nvar defaultNamespace = 'default';\nvar Cache = /** @class */ (function (_super) {\n    __extends(Cache, _super);\n    function Cache(namespace, options) {\n        var _this = _super.call(this) || this;\n        var ns = defaultNamespace, opts;\n        if (typeof namespace === 'string') {\n            ns = namespace;\n        }\n        else if (typeof namespace === 'object') {\n            opts = namespace;\n        }\n        if (!opts && typeof options === 'object') {\n            opts = options;\n        }\n        _this.options = __assign({ max: -1, stdTTL: 0, maxStrategy: 'limited', checkperiod: 0, prefix: defaultPrefix }, opts);\n        _this.storage = new Storage(_this.options.storage, __assign({ memoryScope: ns }, opts));\n        _this.cacheKey = (_this.options.prefix || '') + (ns || '') || getUniqueId();\n        _this.startCheckperiod();\n        return _this;\n    }\n    // 检查当前键值是否过期，如果过期将会自动删除\n    Cache.prototype._check = function (key, data) {\n        var ret = true;\n        if (data.t !== 0 && data.t < Date.now()) {\n            ret = false;\n            this.del(key);\n            this.emit('expired', key, data.v);\n        }\n        return ret;\n    };\n    Cache.prototype._wrap = function (value, ttl) {\n        var now = Date.now();\n        var currentTtl = typeof ttl === 'number' ? ttl : this.options.stdTTL;\n        var livetime = currentTtl > 0 ? now + currentTtl : 0;\n        return {\n            v: value,\n            t: livetime,\n            n: now\n        };\n    };\n    Cache.prototype._isLimited = function (len) {\n        return this.options.max > -1 && len >= this.options.max;\n    };\n    Cache.prototype._getReplaceKey = function (keys, cacheValues) {\n        var retkey = keys[0];\n        keys.forEach(function (key) {\n            if (cacheValues[key].t < cacheValues[retkey].t ||\n                (cacheValues[key].t === cacheValues[retkey].t && cacheValues[key].n < cacheValues[retkey].n)) {\n                retkey = key;\n            }\n        });\n        return retkey;\n    };\n    Object.defineProperty(Cache.prototype, \"cacheValues\", {\n        // 获取全部缓存数据，不处理过期数据和排序\n        get: function () {\n            return this.storage.get(this.cacheKey) || {};\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // 设置缓存数据\n    Cache.prototype.setCacheValues = function (values) {\n        this.storage.set(this.cacheKey, values);\n    };\n    // 从缓存中获取保存的值。如果未找到或已过期，则返回 undefined 。如果找到该值，则返回该值。\n    Cache.prototype.get = function (key) {\n        var data = this.cacheValues[key];\n        if (data && this._check(key, data)) {\n            return data.v;\n        }\n        return;\n    };\n    // 从缓存中获取多个保存的值。如果未找到或已过期，则返回一个空对象。如果找到该值，它会返回一个具有键值对的对象。\n    Cache.prototype.mget = function (keys) {\n        var _this = this;\n        var ret = {};\n        if (!Array.isArray(keys)) {\n            return ret;\n        }\n        var cacheValues = this.cacheValues;\n        keys.forEach(function (key) {\n            var data = cacheValues[key];\n            if (data && _this._check(key, data)) {\n                ret[key] = data.v;\n            }\n        });\n        return ret;\n    };\n    // 从缓存中获取全部保存的值。返回一个具有键值对的对象。\n    Cache.prototype.getAll = function () {\n        var keys = Object.keys(this.cacheValues);\n        return this.mget(keys);\n    };\n    // 设置键值对。设置成功返回 true 。\n    Cache.prototype.set = function (key, value, ttl) {\n        if (this.options.max === 0) {\n            return false;\n        }\n        var cacheValues = this.cacheValues;\n        var keys = Object.keys(cacheValues);\n        // 当前不存在该键值，并且数据量超过最大限制\n        if (!cacheValues[key] && this._isLimited(keys.length)) {\n            var validKeys = this.keys();\n            if (this._isLimited(validKeys.length)) {\n                // 如果最大限制策略是替换，将优先替换快过期的数据，如果都是一样的过期时间(0)，按照先入先出规则处理。\n                if (this.options.maxStrategy === 'replaced') {\n                    var replaceKey = this._getReplaceKey(validKeys, cacheValues);\n                    this.del(replaceKey);\n                }\n                else {\n                    // 如果是最大限制策略是不允许添加，返回 false 。\n                    return false;\n                }\n            }\n        }\n        cacheValues[key] = this._wrap(value, ttl);\n        this.setCacheValues(cacheValues);\n        this.emit('set', key, cacheValues[key].v);\n        return true;\n    };\n    // 设置多个键值对。全部设置成功返回 true 。\n    Cache.prototype.mset = function (keyValueSet) {\n        var _this = this;\n        // 该处不使用数组 some 方法，是因为不能某个失败，而导致其他就不在更新。\n        var ret = true;\n        keyValueSet.forEach(function (item) {\n            var itemSetResult = _this.set(item.key, item.value, item.ttl);\n            if (ret && !itemSetResult) {\n                ret = false;\n            }\n        });\n        return ret;\n    };\n    // 删除一个或多个键。返回已删除条目的数量。删除永远不会失败。\n    Cache.prototype.del = function (key) {\n        var _this = this;\n        var cacheValues = this.cacheValues;\n        var count = 0;\n        var keys = Array.isArray(key) ? key : [key];\n        keys.forEach(function (key) {\n            if (cacheValues[key]) {\n                count++;\n                var oldData = cacheValues[key];\n                delete cacheValues[key];\n                _this.emit('del', key, oldData.v);\n            }\n        });\n        if (count > 0) {\n            this.setCacheValues(cacheValues);\n        }\n        return count;\n    };\n    // 删除当前所有缓存。\n    Cache.prototype.clear = function () {\n        this.storage.del(this.cacheKey);\n    };\n    // 返回所有现有键的数组。\n    Cache.prototype.keys = function () {\n        var _this = this;\n        var cacheValues = this.cacheValues;\n        var keys = Object.keys(cacheValues);\n        return keys.filter(function (key) { return _this._check(key, cacheValues[key]); });\n    };\n    // 当前缓存是否包含某个键。\n    Cache.prototype.has = function (key) {\n        var data = this.cacheValues[key];\n        return !!(data && this._check(key, data));\n    };\n    // 获取缓存值并从缓存中删除键。\n    Cache.prototype.take = function (key) {\n        var ret;\n        var data = this.cacheValues[key];\n        if (data && this._check(key, data)) {\n            ret = data.v;\n            this.del(key);\n        }\n        return ret;\n    };\n    // 重新定义一个键的 ttl 。如果找到并更新成功，则返回 true 。\n    Cache.prototype.ttl = function (key, ttl) {\n        var cacheValues = this.cacheValues;\n        var data = cacheValues[key];\n        if (data && this._check(key, data)) {\n            cacheValues[key] = this._wrap(data.v, ttl);\n            return true;\n        }\n        return false;\n    };\n    // 获取某个键的 ttl 。\n    // 如果未找到键或已过期，返回 undefined 。\n    // 如果 ttl 为 0 ，返回 0 。\n    // 否则返回一个以毫秒为单位的时间戳，表示键值将过期的时间。\n    Cache.prototype.getTtl = function (key) {\n        var cacheValues = this.cacheValues;\n        var data = cacheValues[key];\n        if (data && this._check(key, data)) {\n            return cacheValues[key].t;\n        }\n        return;\n    };\n    // 获取某个键值的最后修改时间\n    // 如果未找到键或已过期，返回 undefined 。\n    // 否则返回一个以毫秒为单位的时间戳，表示键值将过期的时间。\n    Cache.prototype.getLastModified = function (key) {\n        var cacheValues = this.cacheValues;\n        var data = cacheValues[key];\n        if (data && this._check(key, data)) {\n            return cacheValues[key].n;\n        }\n        return;\n    };\n    // 启动定时校验过期数据\n    Cache.prototype.startCheckperiod = function () {\n        var _this = this;\n        // 触发全部缓存数据是否过期校验\n        this.keys();\n        if (this.options.checkperiod > 0) {\n            clearTimeout(this._checkTimeout);\n            this._checkTimeout = setTimeout(function () {\n                _this.startCheckperiod();\n            }, this.options.checkperiod);\n        }\n    };\n    // 停止定时校验过期数据\n    Cache.prototype.stopCheckperiod = function () {\n        clearTimeout(this._checkTimeout);\n    };\n    return Cache;\n}(Emitter));\n\nexport { Cache, Storage, Cache as default };\n","import { randomInt } from 'ut2';\n\nconst mathPI = Math.PI;\n\n// 拼图点\nexport enum Point {\n  None, // 没有\n  Outer, // 外部\n  Inner, // 内部\n}\nexport const pointArray = [Point.None, Point.Outer, Point.Inner];\n\n// 随机选择数组中的某一项\nfunction pick<T = any>(arr: T[]) {\n  const len = arr.length;\n  const randomIndex = randomInt(0, len - 1);\n  return arr[randomIndex];\n}\n\n// 获取随机拼图点\nexport function getRandomPoints(pointNum?: 2 | 3 | 4) {\n  const points = {\n    top: pick(pointArray),\n    right: pick(pointArray),\n    bottom: pick(pointArray),\n    left: pick(pointArray),\n  };\n  type PointKey = keyof typeof points;\n  const pointsKeys = Object.keys(points) as PointKey[];\n  const verticalDirs = ['top', 'bottom'] as PointKey[];\n  const horizontalDirs = ['left', 'right'] as PointKey[];\n\n  // 保证上下 和 左右 都必须有一个外部的拼图点\n  if (points.top === Point.Outer && points.bottom === Point.Outer) {\n    points[pick(verticalDirs)] = Point.Inner;\n  } else if (points.top !== Point.Outer && points.bottom !== Point.Outer) {\n    points[pick(verticalDirs)] = Point.Outer;\n  }\n  if (points.left === Point.Outer && points.right === Point.Outer) {\n    points[pick(horizontalDirs)] = Point.Inner;\n  } else if (points.left !== Point.Outer && points.right !== Point.Outer) {\n    points[pick(horizontalDirs)] = Point.Outer;\n  }\n\n  if (pointNum) {\n    const inners: PointKey[] = [];\n    const nones: PointKey[] = [];\n    pointsKeys.forEach((item) => {\n      if (points[item] === Point.Inner) {\n        inners.push(item);\n      } else if (points[item] === Point.None) {\n        nones.push(item);\n      }\n    });\n\n    if (pointNum === 2) {\n      inners.forEach((item) => (points[item] = Point.None));\n    } else if (pointNum === 3) {\n      if (inners.length === 0) {\n        points[pick(nones)] = Point.Inner;\n      } else if (inners.length === 2) {\n        points[pick(inners)] = Point.None;\n      }\n    } else if (pointNum == 4) {\n      nones.forEach((item) => (points[item] = Point.Inner));\n    }\n  }\n\n  return points;\n}\n\n// 画拼图\nexport function drawPuzzle(\n  ctx: CanvasRenderingContext2D,\n  options: {\n    x?: number;\n    y?: number;\n    w?: number;\n    h?: number;\n    points?:\n      | 2\n      | 3\n      | 4\n      | {\n          // 拼图点\n          top: Point;\n          right: Point;\n          bottom: Point;\n          left: Point;\n        };\n    margin?: number; // 外部留白\n    needClosePath?: boolean; // 是否要闭合路径\n  } = {},\n) {\n  const { x = 0, y = 0, w = 60, h = 60, needClosePath = true } = options;\n  let { points, margin = 0 } = options;\n\n  margin = margin <= 0 ? 0 : margin;\n\n  if (typeof points === 'number' || !points) {\n    points = getRandomPoints(points);\n  }\n\n  const r = (Math.min(w, h) - margin * 2) * 0.15; // 适合拼图点的比例 0.15\n  const l = Math.hypot(r, r); // 斜边长度\n  const l1_2 = l / 2; // 斜边长度一半，45度角直角三角形，邻边相等\n  const c2r = r + l1_2; // 圆直径\n\n  const rect = {\n    x: x + margin,\n    y: y + margin,\n    w: w - c2r - margin * 2,\n    h: h - c2r - margin * 2,\n  };\n  const w1_2 = rect.w / 2; // 矩形一半宽度\n  const h1_2 = rect.h / 2; // 矩形一半高度\n\n  if (points.left === Point.Outer) {\n    rect.x += c2r;\n  }\n  if (points.top === Point.Outer) {\n    rect.y += c2r;\n  }\n\n  // draw start\n  ctx.beginPath();\n  ctx.lineWidth = 2;\n\n  // top\n  ctx.moveTo(rect.x, rect.y);\n  if (points.top !== Point.None) {\n    ctx.lineTo(rect.x + w1_2 - l1_2, rect.y);\n    if (points.top === Point.Inner) {\n      ctx.arc(rect.x + w1_2, rect.y + l1_2, r, 1.25 * mathPI, 1.75 * mathPI, true);\n    } else {\n      ctx.arc(rect.x + w1_2, rect.y - l1_2, r, 0.75 * mathPI, 0.25 * mathPI);\n    }\n  }\n  ctx.lineTo(rect.x + rect.w, rect.y);\n\n  // right\n  if (points.right !== Point.None) {\n    ctx.lineTo(rect.x + rect.w, rect.y + h1_2 - l1_2);\n    if (points.right === Point.Inner) {\n      ctx.arc(rect.x + rect.w - l1_2, rect.y + h1_2, r, 1.75 * mathPI, 0.25 * mathPI, true);\n    } else {\n      ctx.arc(rect.x + rect.w + l1_2, rect.y + h1_2, r, 1.25 * mathPI, 0.75 * mathPI);\n    }\n  }\n  ctx.lineTo(rect.x + rect.w, rect.y + rect.h);\n\n  // bottom\n  if (points.bottom !== Point.None) {\n    ctx.lineTo(rect.x + w1_2 + l1_2, rect.y + rect.h);\n    if (points.bottom === Point.Inner) {\n      ctx.arc(rect.x + w1_2, rect.y + rect.h - l1_2, r, 0.25 * mathPI, 0.75 * mathPI, true);\n    } else {\n      ctx.arc(rect.x + w1_2, rect.y + rect.h + l1_2, r, 1.75 * mathPI, 1.25 * mathPI);\n    }\n  }\n  ctx.lineTo(rect.x, rect.y + rect.h);\n\n  // left\n  if (points.left !== Point.None) {\n    ctx.lineTo(rect.x, rect.y + h1_2 + l1_2);\n    if (points.left === Point.Inner) {\n      ctx.arc(rect.x + l1_2, rect.y + h1_2, r, 0.75 * mathPI, 1.25 * mathPI, true);\n    } else {\n      ctx.arc(rect.x - l1_2, rect.y + h1_2, r, 0.25 * mathPI, 1.75 * mathPI);\n    }\n  }\n  ctx.lineTo(rect.x, rect.y);\n\n  ctx.stroke();\n\n  needClosePath && ctx.closePath();\n\n  // ctx.fillStyle = \"red\";\n  // ctx.fill();\n\n  // ctx.strokeRect(x, y, w, h);\n}\n\nexport function canvasToImage(\n  canvas: HTMLCanvasElement,\n  formatBlob: boolean,\n  type: string,\n  quality: number,\n) {\n  return new Promise<string>((resolve) => {\n    if (formatBlob) {\n      canvas.toBlob(\n        (blob) => {\n          if (blob) {\n            resolve(URL.createObjectURL(blob));\n          } else {\n            resolve(canvas.toDataURL(type, quality));\n          }\n        },\n        type,\n        quality,\n      );\n    } else {\n      resolve(canvas.toDataURL(type, quality));\n    }\n  });\n}\n","import { __assign } from 'tslib';\nimport { Cache } from 'cache2';\nimport { isString, uniqueId } from 'ut2';\n\nvar AsyncMemo = (function () {\n    function AsyncMemo(options) {\n        this.promiseCache = {};\n        this.cache = new Cache(uniqueId('uh_async_memo'), options);\n    }\n    AsyncMemo.prototype.run = function (asyncFn, key, options) {\n        var _this = this;\n        if (!key || !isString(key)) {\n            return asyncFn();\n        }\n        var opts = __assign({ persisted: true }, options);\n        if (opts.persisted) {\n            var data = this.cache.get(key);\n            if (data) {\n                return Promise.resolve(data);\n            }\n        }\n        if (!this.promiseCache[key]) {\n            this.promiseCache[key] = asyncFn()\n                .then(function (res) {\n                delete _this.promiseCache[key];\n                _this.cache.set(key, res, opts.ttl);\n                return res;\n            })\n                .catch(function (err) {\n                delete _this.promiseCache[key];\n                return Promise.reject(err);\n            });\n        }\n        return this.promiseCache[key];\n    };\n    return AsyncMemo;\n}());\nvar AsyncMemo$1 = AsyncMemo;\n\nexport { AsyncMemo$1 as default };\n","import getTag from './internals/getTag.js';\nimport { stringTag } from './internals/native.js';\n\nfunction isString(value) {\n    return typeof value === 'string' || getTag(value) === stringTag;\n}\n\nexport { isString as default };\n","import { AsyncMemo, loadImageWithBlob } from 'util-helpers';\nimport { getRandomPoints, drawPuzzle, Point, canvasToImage } from './util';\nimport { isObject, randomInt, uniqueId } from 'ut2';\n\nconst asyncMemo = new AsyncMemo<{\n  image: HTMLImageElement;\n  blob: Blob;\n}>({ max: 5, maxStrategy: 'replaced' });\nasyncMemo.cache.on('del', (k, v) => {\n  try {\n    if (v.image.src) {\n      URL.revokeObjectURL(v.image.src);\n    }\n  } catch (err) {\n    /* empty */\n  }\n});\nfunction clearCache(key?: string | string[]) {\n  if (key) {\n    asyncMemo.cache.del(key);\n  } else {\n    asyncMemo.cache.clear();\n  }\n}\n\nconst wm = new WeakMap();\nconst getCacheKey = (obj: string | Blob) => {\n  if (!isObject(obj)) {\n    return String(obj);\n  }\n  if (!wm.get(obj)) {\n    wm.set(obj, uniqueId('cp'));\n  }\n  return wm.get(obj) as string;\n};\n\nconst MimeType = {\n  jpeg: 'image/jpeg',\n  png: 'image/png',\n};\n\n// 缓存之前的 blob url\nconst previousBlobUrlCache: string[] = [];\n\nfunction revokeBlobUrls(blobUrls: string[]) {\n  blobUrls.forEach((item) => {\n    URL.revokeObjectURL(item);\n  });\n}\n\ntype Options = {\n  // 拼图\n  borderWidth?: number; // 描边宽度。默认 2\n  borderColor?: string; // 描边颜色。默认 rgba(255,255,255,0.7)\n  fillColor?: string; // 填充颜色。默认 rgba(255,255,255,0.7)\n  points?: NonNullable<Parameters<typeof drawPuzzle>[1]>['points']; // 拼图点，不传默认随机2/3/4\n  width?: number; // 宽度。默认 60\n  height?: number; // 高度。默认 60\n  x?: number; // x 轴偏移值，如果不传内部随机生成。\n  y?: number; // y 轴偏移值，如果不传内部随机生成。\n  margin?: number; // 上下左右留白。默认 2\n  equalHeight?: boolean; // 等高。默认 true\n\n  // 背景图\n  bgWidth?: number; // 背景图宽度。默认 图片宽度\n  bgHeight?: number; // 背景图高度。默认 图片高度\n  bgOffset?: [number, number] | ((imgWidth: number, imgHeight: number) => [number, number]); // 背景图偏移值。 默认 [0,0]\n\n  // 上传的图片\n  imageWidth?: number; // 自定义输入图片宽度。\n  imageHeight?: number; // 自定义输入图片高度。\n  cacheImage?: boolean; // 缓存最近加载成功的图片，最大缓存数量为 5 ，可使用 clearCache 清理缓存。默认为 true 。\n  ajaxOptions?: Parameters<typeof loadImageWithBlob>[1]; // ajax 请求配置项，当传入的图片为字符串时才会触发请求。可查阅： https://doly-dev.github.io/util-helpers/global.html#AjaxOptions\n\n  // 导出配置\n  bgImageType?: string; // 背景图导出类型。默认 image/jpeg\n  quality?: number; // 导出图片质量。默认 0.8 。\n  format?: 'dataURL' | 'blob'; // 导出图片格式。默认 dataURL 。\n  autoRevokePreviousBlobUrl?: boolean; // 自动释放之前导出的 blob url ，仅在 format='blob' 时生效。默认 true 。\n};\n\ntype Result = {\n  bgUrl: string; // 背景图\n  puzzleUrl: string; // 拼图\n  x: number; // x 轴偏移值，建议校验时前后阈值增减 5 的范围\n  y: number; // y 轴偏移值，等高拼图时值始终为 0\n};\n\n// 创建拼图和背景图\nfunction createPuzzle(imgUrl: string | Blob, options: Options = {}) {\n  const {\n    borderWidth = 2,\n    borderColor = 'rgba(255,255,255,0.7)',\n    fillColor = 'rgba(255,255,255,0.7)',\n    points: outPoints,\n    width = 60,\n    height = 60,\n    x: outX,\n    y: outY,\n    margin = 2,\n    equalHeight = true,\n\n    imageWidth,\n    imageHeight,\n\n    bgWidth: outBgWidth,\n    bgHeight: outBgHeight,\n    bgOffset: outBgOffset = [0, 0],\n\n    bgImageType = MimeType.jpeg,\n    quality = 0.8,\n    format = 'dataURL',\n\n    cacheImage = true,\n    autoRevokePreviousBlobUrl = true,\n    ajaxOptions,\n  } = options;\n\n  return new Promise<Result>((resolve, reject) => {\n    const bgCanvas = document.createElement('canvas');\n    const puzzleCanvas = document.createElement('canvas');\n\n    const bgCtx = bgCanvas.getContext('2d')!;\n    const puzzleCtx = puzzleCanvas.getContext('2d')!;\n\n    const cacheKey = cacheImage ? getCacheKey(imgUrl) : undefined;\n\n    asyncMemo\n      .run(() => loadImageWithBlob(imgUrl, ajaxOptions), cacheKey)\n      .then(({ image: img }) => {\n        if (imageWidth) {\n          img.width = imageWidth;\n        }\n        if (imageHeight) {\n          img.height = imageHeight;\n        }\n        const bgWidth =\n          typeof outBgWidth === 'number' && outBgWidth > 0\n            ? outBgWidth > width\n              ? outBgWidth\n              : width\n            : img.width;\n        const bgHeight =\n          typeof outBgHeight === 'number' && outBgHeight > 0\n            ? outBgHeight > height\n              ? outBgHeight\n              : height\n            : img.height;\n\n        bgCanvas.width = bgWidth;\n        bgCanvas.height = bgHeight;\n\n        const maxOffsetX = bgWidth - width;\n        const maxOffsetY = bgHeight - height;\n        let x = typeof outX === 'undefined' ? randomInt(width, maxOffsetX) : outX || 0;\n        let y = typeof outY === 'undefined' ? randomInt(0, maxOffsetY) : outY || 0;\n\n        if (x < 0) {\n          x = 0;\n        } else if (x > maxOffsetX) {\n          x = maxOffsetX;\n        }\n\n        if (y < 0) {\n          y = 0;\n        } else if (y > maxOffsetY) {\n          y = maxOffsetY;\n        }\n\n        const points =\n          typeof outPoints === 'number' || !outPoints ? getRandomPoints(outPoints) : outPoints;\n        const bgOffset =\n          typeof outBgOffset === 'function' ? outBgOffset(img.width, img.height) : outBgOffset;\n\n        // 背景图\n        bgCtx.strokeStyle = borderColor;\n        bgCtx.lineWidth = borderWidth;\n        bgCtx.fillStyle = fillColor;\n        drawPuzzle(bgCtx, { x, y, w: width, h: height, points, margin });\n        bgCtx.fillStyle = fillColor;\n        bgCtx.fill();\n        bgCtx.globalCompositeOperation = 'destination-over';\n        bgCtx.drawImage(img, bgOffset[0], bgOffset[1], img.width, img.height);\n\n        puzzleCanvas.width = bgWidth;\n        puzzleCanvas.height = bgHeight;\n\n        // 拼图\n        puzzleCtx.strokeStyle = borderColor;\n        puzzleCtx.lineWidth = borderWidth;\n        drawPuzzle(puzzleCtx, { x, y, w: width, h: height, points, margin });\n        puzzleCtx.globalCompositeOperation = 'destination-over';\n        puzzleCtx.clip();\n        puzzleCtx.drawImage(img, bgOffset[0], bgOffset[1], img.width, img.height);\n\n        // restore image\n        const imgData = puzzleCtx.getImageData(x, y, width, height);\n        puzzleCtx.clearRect(0, 0, bgWidth, bgHeight);\n        puzzleCanvas.width = width;\n        puzzleCanvas.height = equalHeight ? bgHeight : height;\n        puzzleCtx.putImageData(imgData, 0, equalHeight ? y : 0);\n\n        const formatBlob = format === 'blob';\n\n        const puzzlePromise = canvasToImage(puzzleCanvas, formatBlob, MimeType.png, quality);\n        const bgPromise = canvasToImage(bgCanvas, formatBlob, bgImageType, quality);\n\n        Promise.all([puzzlePromise, bgPromise])\n          .then(([puzzleUrl, bgUrl]) => {\n            if (autoRevokePreviousBlobUrl) {\n              if (previousBlobUrlCache.length) {\n                revokeBlobUrls(previousBlobUrlCache);\n                previousBlobUrlCache.length = 0;\n              }\n\n              if (formatBlob) {\n                previousBlobUrlCache.push(bgUrl, puzzleUrl);\n              }\n            }\n            resolve({\n              puzzleUrl,\n              bgUrl,\n              x,\n              y: equalHeight ? 0 : y,\n            });\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n}\n\nexport { createPuzzle, getRandomPoints, drawPuzzle, Point, clearCache };\nexport type { Result, Options };\n\nexport default createPuzzle;\n"],"names":["objectProtoToString","Object","prototype","toString","mathMin","Math","min","mathMax","max","mathRandom","random","mathFloor","floor","mathCeil","ceil","symbolTag","blobTag","isObject","value","isObjectLike","getTag","call","reIsBinary","reIsOctal","reIsBadHex","toNumber","isSymbol","NaN","Number","trim","isBinary","test","parseInt","slice","MAX_VALUE","toFinite","Infinity","randomInt","lower","upper","temp","blobExisted","Blob","isBlob","idCounter","defaultPrefix","substring","uniqueId","prefix","URLExisted","URL","objectKeys","keys","createObjectURL","revokeObjectURL","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__assign","assign","t","s","i","n","arguments","length","apply","this","SuppressedError","SuccessResponseStatus","getFileBlob","file","ajaxOptions","Promise","resolve","reject","url","options","_a","_b","method","_c","data","timeout","headers","_d","withCredentials","_e","async","_f","user","_g","password","responseType","onReadyStateChange","onLoadStart","onProgress","onAbort","onTimeout","onError","onLoad","onLoadEnd","xhr","XMLHttpRequest","open","toLowerCase","onreadystatechange","map","item","setRequestHeader","cb","wrapError","e","events","loadstart","progress","abort","error","load","loadend","func","addEventListener","send","then","ev","responseStatus","target","status","indexOf","response","err","Error","concat","console","catch","loadImageWithBlob","img","blob","imgIsBlob","image","Image","crossOrigin","onload","onerror","src","loadImage","EmitterPro","handlers","eventNames","symbols","getOwnPropertySymbols","rawListeners","eventName","handler","raw","listeners","wrap","hasListener","listener","some","_on","context","dir","currentListener","appendMethod","prependListener","on","_wrapOnce","_this","args","_i","off","once","prependOnceListener","index","findIndex","splice","offAll","emit","forEach","uid","getUniqueId","Point","cache","MemoryStorage","scope","getItem","key","setItem","removeItem","clear","Storage","storage","isSupported","isSupport","isStorageSupported","needParsed","memoryScope","get","reviver","JSON","parse","set","replacer","stringify","del","Cache","_super","namespace","opts","ns","stdTTL","maxStrategy","checkperiod","cacheKey","startCheckperiod","TypeError","String","__","constructor","create","__extends","_check","ret","Date","now","v","_wrap","ttl","currentTtl","_isLimited","len","_getReplaceKey","cacheValues","retkey","defineProperty","enumerable","configurable","setCacheValues","values","mget","isArray","getAll","validKeys","replaceKey","mset","keyValueSet","itemSetResult","count","oldData","filter","has","take","getTtl","getLastModified","clearTimeout","_checkTimeout","setTimeout","stopCheckperiod","Emitter","AsyncMemo","promiseCache","run","asyncFn","isString","persisted","res","AsyncMemo$1","mathPI","PI","exports","pointArray","None","Outer","Inner","pick","arr","getRandomPoints","pointNum","points","top","right","bottom","left","pointsKeys","verticalDirs","horizontalDirs","inners_1","nones_1","push","drawPuzzle","ctx","x","y","w","h","needClosePath","margin","r","l1_2","hypot","c2r","rect","w1_2","h1_2","beginPath","lineWidth","moveTo","lineTo","arc","stroke","closePath","canvasToImage","canvas","formatBlob","type","quality","toBlob","toDataURL","asyncMemo","k","wm","WeakMap","MimeType","previousBlobUrlCache","createPuzzle","imgUrl","borderWidth","borderColor","fillColor","outPoints","width","height","outX","outY","equalHeight","imageWidth","imageHeight","outBgWidth","bgWidth","outBgHeight","bgHeight","_h","bgOffset","outBgOffset","_j","bgImageType","_k","_l","format","_m","cacheImage","_o","autoRevokePreviousBlobUrl","obj","bgCanvas","document","createElement","puzzleCanvas","bgCtx","getContext","puzzleCtx","undefined","maxOffsetX","maxOffsetY","strokeStyle","fillStyle","fill","globalCompositeOperation","drawImage","clip","imgData","getImageData","clearRect","putImageData","puzzlePromise","bgPromise","all","puzzleUrl","bgUrl"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,22,23]}